<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teras Cerita</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }

      .chat-bubble {
        max-width: 75%;
        padding: 12px 16px;
        border-radius: 20px;
        word-wrap: break-word;
      }

      .user-bubble {
        background-color: #3b82f6;
        color: white;
        border-bottom-right-radius: 4px;
        align-self: flex-end;
      }

      .ai-bubble {
        background-color: #e5e7eb;
        color: #1f2937;
        border-bottom-left-radius: 4px;
        align-self: flex-start;
      }

      .recommendation-card {
        background-color: #fffbeb;
        border: 1px solid #fbbf24;
      }

      .stress-bar-bg {
        background-color: #e5e7eb;
        border-radius: 9999px;
        overflow: hidden;
      }

      .stress-bar-fill {
        height: 100%;
        border-radius: 9999px;
        transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out;
      }
    </style>
  </head>

  <body class="bg-blue-50 text-gray-800">
    <!-- Landing Page Section -->
    <div id="landing-page" class="flex flex-col items-center justify-center min-h-screen p-6 text-center transition-opacity duration-500">
      <div class="max-w-2xl">
        <svg class="w-24 h-24 mx-auto text-blue-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
        </svg>
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900">Selamat Datang di <span class="text-blue-600">Hati Tenang</span></h1>
        <p class="mt-4 text-lg text-gray-600">Sebuah ruang aman yang berjalan 100% di browsermu. Cepat, gratis, dan sepenuhnya privat.</p>
        <button id="start-chat-btn" class="mt-8 px-8 py-4 bg-blue-600 text-white font-semibold rounded-full shadow-lg hover:bg-blue-700 transform hover:scale-105 transition-transform duration-300">Mulai Curhat</button>
      </div>
    </div>

    <!-- Chat Page Section -->
    <div id="chat-page" class="hidden flex-col h-screen max-w-3xl mx-auto bg-white shadow-2xl">
      <header class="p-4 border-b border-gray-200">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
            </svg>
            <h2 class="ml-3 text-lg font-semibold text-gray-900">Teman Cerita</h2>
          </div>
          <div class="w-1/3">
            <p class="text-xs text-gray-500 mb-1 text-right" id="stress-level-text">Tingkat Stres: Rendah</p>
            <div class="stress-bar-bg h-2.5">
              <div id="stress-bar" class="stress-bar-fill bg-green-500" style="width: 10%"></div>
            </div>
          </div>
        </div>
      </header>

      <main id="chat-area" class="flex-1 p-6 overflow-y-auto flex flex-col space-y-4"></main>

      <footer class="p-4 border-t border-gray-200">
        <div class="flex items-center">
          <input type="text" id="chat-input" placeholder="Ketik ceritamu di sini..." class="w-full px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <button id="send-btn" class="ml-3 p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </button>
        </div>
      </footer>
    </div>

    <script>
      // --- Otak Lokal (Pengganti API) ---

      // 1. Kamus untuk Analisis Stres (SANGAT DIPERKAYA)
      const stressKeywords = {
        // Emosi Negatif Kuat
        "putus asa": 35,
        menyerah: 35,
        "tidak kuat": 30,
        hancur: 25,
        benci: 20,
        sakit: 20,
        stres: 20,
        gagal: 20,
        salah: 10,
        beban: 20,
        frustrasi: 25,
        terpuruk: 30,
        remuk: 30,
        down: 25,
        drop: 25,
        hampa: 20,
        kosong: 20,
        "tak berarti": 30,
        "putus harapan": 35,
        hopeless: 35,
        broken: 25,
        "mental breakdown": 35,
        collapse: 30,

        // Emosi Sedih & Kecewa
        sedih: 15,
        kecewa: 15,
        menyesal: 15,
        bersalah: 15,
        murung: 15,
        galau: 15,
        "patah hati": 20,
        nelangsa: 25,
        "sakit hati": 20,
        terluka: 20,
        "air mata": 20,
        "hancur hati": 25,
        gundah: 15,
        risau: 15,
        "down banget": 20,
        nyesek: 20,
        kangen: 15,
        kehilangan: 25,

        // Emosi Cemas & Takut
        cemas: 15,
        takut: 15,
        khawatir: 15,
        gelisah: 15,
        gugup: 10,
        panik: 20,
        "was-was": 15,
        resah: 15,
        "tidak tenang": 15,
        "deg-degan": 15,
        canggung: 10,
        "ngerasa gak aman": 20,
        phobia: 20,

        // Emosi Lelah & Bingung
        lelah: 15,
        capek: 15,
        letih: 15,
        lesu: 15,
        bingung: 10,
        ragu: 10,
        "tidak yakin": 10,
        bosan: 10,
        jenuh: 15,
        drop: 20,
        overthinking: 20,
        pusing: 15,
        "stress kerja": 25,
        burnout: 30,
        "mental drop": 20,
        "otak buntu": 20,
        mentok: 15,

        // Emosi Marah & Kesal
        marah: 15,
        kesal: 10,
        jengkel: 10,
        muak: 15,
        emosi: 10,
        dongkol: 10,
        geram: 15,
        bete: 10,
        "bad mood": 15,
        ngamuk: 20,
        sebal: 10,
        "kesel banget": 15,
        toxic: 20,

        // Emosi Kesepian
        sendiri: 15,
        kesepian: 20,
        sunyi: 15,
        terasing: 20,
        "tidak ada teman": 20,
        "tak dianggap": 20,
        "hampa sosial": 25,
        ignored: 20,
        alone: 20,

        // Emosi Positif & Lega
        lega: -15,
        senang: -15,
        bahagia: -20,
        "terima kasih": -10,
        baik: -10,
        semangat: -15,
        harapan: -10,
        solusi: -5,
        berhasil: -20,
        bangga: -15,
        bersyukur: -15,
        optimis: -15,
        tenang: -15,
        puas: -15,
        cukup: -10,
        damai: -15,
        sukses: -20,
        tercapai: -20,
        mantap: -15,
        alhamdulillah: -20,
      };

      // 2. Aturan untuk Balasan Percakapan (SANGAT DIPERKAYA)
      const responseRules = {
        sedih: [
          "Aku turut merasakan kesedihanmu.",
          "Tidak apa-apa untuk merasa sedih.",
          "Aku di sini untuk mendengarkan jika kamu ingin berbagi lebih banyak.",
          "Kedengarannya berat sekali, ya.",
          "Pasti sulit sekali merasakan itu.",
          "Kadang menangis bisa membantu melepas beban hati.",
          "Aku harap ada sesuatu yang bisa sedikit menghiburmu.",
          "Sedih itu wajar, tandanya kamu manusia yang punya hati.",
          "Terima kasih sudah berani cerita, itu langkah besar.",
        ],
        marah: [
          "Aku bisa merasakan kemarahanmu dari ceritamu.",
          "Perasaan marah itu valid, kok.",
          "Apa yang membuatmu merasa begitu marah?",
          "Luapkan saja, tidak apa-apa.",
          "Terdengar sangat membuat frustrasi.",
          "Aku bisa mengerti kenapa itu sangat mengganggumu.",
          "Marah itu tanda kamu peduli.",
          "Aku tidak akan menghakimimu karena merasa marah.",
        ],
        takut: [
          "Terdengar menakutkan, ya.",
          "Tidak apa-apa merasa takut.",
          "Aku di sini menemanimu.",
          "Coba tarik napas dalam-dalam, aku ada di sini.",
          "Aku tahu itu pasti bikin cemas.",
          "Kamu tidak sendirian menghadapi ini.",
          "Kadang rasa takut muncul sebelum hal besar terjadi.",
        ],
        kecewa: [
          "Rasa kecewa itu memang tidak enak.",
          "Wajar jika kamu merasa kecewa saat ini.",
          "Kamu sudah melakukan yang terbaik, dan itu sudah cukup.",
          "Aku bisa mengerti kenapa kamu merasa begitu.",
          "Mungkin butuh waktu untuk menerima ini semua.",
          "Kekecewaan adalah bagian dari proses hidup.",
          "Aku bangga kamu mau terbuka soal itu.",
        ],
        bingung: [
          "Tidak apa-apa merasa bingung, banyak hal memang tidak mudah dipahami.",
          "Mari kita coba urai satu per satu, apa yang paling membuatmu bingung?",
          "Ambil napas dulu, tidak semua hal harus dimengerti sekarang.",
          "Bingung itu tanda kamu sedang mencoba memahami sesuatu.",
          "Pelan-pelan, kamu tidak harus tahu semua jawabannya sekarang.",
        ],
        ragu: [
          "Perasaan ragu itu normal, kok.",
          "Apa yang membuatmu merasa tidak yakin?",
          "Tidak perlu terburu-buru mengambil keputusan.",
          "Kadang menunggu sebentar bisa membantu memperjelas pikiran.",
          "Kamu punya waktu untuk mempertimbangkan semuanya.",
        ],
        lelah: [
          "Terdengar sangat melelahkan.",
          "Jangan lupa istirahat, ya. Kamu pantas mendapatkannya.",
          "Kamu sudah bekerja keras, tidak apa-apa merasa lelah.",
          "Beristirahat bukan berarti menyerah, kok.",
          "Tidur cukup bisa bantu pikiran lebih jernih.",
          "Capekmu valid, kamu bukan robot.",
          "Terima kasih sudah tetap berjuang meski lelah.",
        ],
        sendiri: [
          "Perasaan sepi itu memang berat.",
          "Aku di sini menemanimu, kamu tidak benar-benar sendiri saat ini.",
          "Terima kasih sudah mau berbagi perasaanmu di sini.",
          "Kesepian itu manusiawi, dan kamu sudah berani mengungkapkannya.",
          "Kamu tidak sendirian di dunia ini, aku ada di sini untukmu.",
        ],
        bersalah: [
          "Perasaan bersalah bisa jadi sangat membebani.",
          "Semua orang pernah membuat kesalahan, yang penting adalah bagaimana kita belajar darinya.",
          "Maafkan dirimu pelan-pelan, ya.",
          "Aku percaya kamu punya niat baik meski kadang hasilnya tidak sesuai.",
          "Rasa bersalah ini tidak mendefinisikan siapa dirimu.",
        ],
        gugup: [
          "Tidak apa-apa merasa gugup, itu artinya kamu peduli dengan hasilnya.",
          "Tarik napas panjang, kamu pasti bisa.",
          "Fokus pada satu langkah kecil di depanmu.",
          "Aku tahu ini penting bagimu, dan itu wajar membuat gugup.",
          "Perasaan gugup bisa jadi tanda bahwa sesuatu itu berarti.",
        ],
        "terima kasih": [
          "Sama-sama. Aku senang bisa mendengarkan.",
          "Tentu, aku selalu di sini jika kamu butuh teman cerita lagi.",
          "Jaga diri baik-baik, ya.",
          "Aku juga berterima kasih sudah mau cerita padaku.",
          "Kamu pantas mendapatkan dukungan.",
        ],
        senang: [
          "Aku ikut senang mendengarnya!",
          "Itu berita yang bagus!",
          "Semoga perasaan baik ini bertahan lama untukmu.",
          "Luar biasa! Ceritakan lebih banyak dong.",
          "Senang banget dengar kabar itu!",
          "Kabar baikmu ikut membuatku ikut bahagia.",
        ],
        semangat: ["Semangatmu menular! Aku jadi ikut semangat.", "Itu dia! Terus pertahankan energi positif itu.", "Aku yakin kamu bisa melakukannya.", "Energi positifmu terasa sekali.", "Semangatmu membuktikan kamu kuat."],
        default: [
          "Aku mengerti.",
          "Lalu, apa yang terjadi?",
          "Hmm, coba ceritakan lebih lanjut.",
          "Aku mendengarkan...",
          "Perasaanmu itu penting.",
          "Oke, teruskan saja ceritanya.",
          "Aku di sini.",
          "Paham, lanjutkan saja.",
          "Aku menyimak ceritamu.",
          "Teruskan...",
          "Aku ingin tahu lebih banyak tentang itu.",
          "Aku mendengar dengan penuh perhatian.",
        ],
      };

      // --- Fungsi Logika Lokal ---

      // function analyzeStressLokal(message) {
      //     let stressChange = 0;
      //     const lowerCaseMessage = message.toLowerCase();
      //     for (const keyword in stressKeywords) {
      //         if (lowerCaseMessage.includes(keyword)) {
      //             stressChange += stressKeywords[keyword];
      //         }
      //     }
      //     return stressChange === 0 ? 1 : stressChange; // Beri sedikit kenaikan jika tidak ada keyword
      // }

      // function getResponseLokal(message, stressScore) {
      //     const lowerCaseMessage = message.toLowerCase();
      //     if (stressScore >= 75) {
      //         return {
      //             type: 'escalation',
      //             message: "Terima kasih sudah berbagi begitu dalam. Aku merasakan beban yang berat dari ceritamu. Terkadang, berbicara dengan seorang profesional bisa sangat membantu. Mungkin ini saat yang tepat untuk mempertimbangkannya?"
      //         };
      //     }

      //     for (const keyword in responseRules) {
      //         if (keyword !== 'default' && lowerCaseMessage.includes(keyword)) {
      //             const possibleResponses = responseRules[keyword];
      //             return { type: 'standard', message: possibleResponses[Math.floor(Math.random() * possibleResponses.length)] };
      //         }
      //     }

      //     const defaultResponses = responseRules['default'];
      //     return { type: 'standard', message: defaultResponses[Math.floor(Math.random() * defaultResponses.length)] };
      // }

      // // --- DOM Elements & State (Sama seperti sebelumnya) ---
      // const landingPage = document.getElementById('landing-page');
      // const chatPage = document.getElementById('chat-page');
      // const startChatBtn = document.getElementById('start-chat-btn');
      // const chatArea = document.getElementById('chat-area');
      // const chatInput = document.getElementById('chat-input');
      // const sendBtn = document.getElementById('send-btn');
      // const stressBar = document.getElementById('stress-bar');
      // const stressLevelText = document.getElementById('stress-level-text');

      // let currentStressScore = 10;
      // const MAX_STRESS_SCORE = 100;

      // // --- UI Functions (Sama seperti sebelumnya, sedikit modifikasi) ---
      // startChatBtn.addEventListener('click', () => {
      //     landingPage.classList.add('opacity-0', 'hidden');
      //     chatPage.classList.remove('hidden');
      //     chatPage.classList.add('flex');
      //     addChatBubble("Selamat datang, mari bercerita tentang apa yang kamu rasakan. Apa yang selama ini terpendam di hatimu?", 'ai');
      // });

      // function addChatBubble(message, sender) {
      //     const bubble = document.createElement('div');
      //     bubble.classList.add('chat-bubble', sender === 'user' ? 'user-bubble' : 'ai-bubble');
      //     bubble.textContent = message;
      //     chatArea.appendChild(bubble);
      //     chatArea.scrollTop = chatArea.scrollHeight;
      // }

      // function updateStressIndicator() {
      //     const percentage = Math.max(0, Math.min((currentStressScore / MAX_STRESS_SCORE) * 100, 100));
      //     stressBar.style.width = `${percentage}%`;
      //     if (currentStressScore < 40) {
      //         stressLevelText.textContent = 'Tingkat Stres: Rendah';
      //         stressBar.className = 'stress-bar-fill bg-green-500';
      //     } else if (currentStressScore < 75) {
      //         stressLevelText.textContent = 'Tingkat Stres: Sedang';
      //         stressBar.className = 'stress-bar-fill bg-yellow-500';
      //     } else {
      //         stressLevelText.textContent = 'Tingkat Stres: Tinggi';
      //         stressBar.className = 'stress-bar-fill bg-red-500';
      //     }
      // }

      // function showRecommendation() {
      //     const card = document.createElement('div');
      //     card.classList.add('p-4', 'rounded-lg', 'mt-2', 'recommendation-card');
      //     card.innerHTML = `<h3 class="font-bold text-yellow-800">Bantuan Profesional Tersedia</h3><p class="text-sm text-yellow-700 mt-1">Kesehatan mentalmu adalah prioritas. Jangan ragu menghubungi para ahli jika kamu merasa butuh bantuan lebih lanjut.</p>`;
      //     chatArea.appendChild(card);
      //     chatArea.scrollTop = chatArea.scrollHeight;
      // }

      // // --- Main Chat Function (Versi Offline) ---
      // function sendMessage() {
      //     const message = chatInput.value.trim();
      //     if (message === '') return;

      //     addChatBubble(message, 'user');
      //     chatInput.value = '';

      //     // 1. Analisis stres secara lokal
      //     const stressChange = analyzeStressLokal(message);
      //     currentStressScore += stressChange;
      //     currentStressScore = Math.max(0, Math.min(currentStressScore, MAX_STRESS_SCORE));
      //     updateStressIndicator();

      //     // 2. Dapatkan balasan lokal
      //     setTimeout(() => {
      //         const response = getResponseLokal(message, currentStressScore);
      //         addChatBubble(response.message, 'ai');
      //         if (response.type === 'escalation') {
      //             showRecommendation();
      //         }
      //     }, 500); // Memberi jeda agar terasa seperti sedang "berpikir"
      // }

      // sendBtn.addEventListener('click', sendMessage);
      // chatInput.addEventListener('keypress', (e) => {
      //     if (e.key === 'Enter') sendMessage();
      // });

      // updateStressIndicator();

      // Deteksi banyak emosi & skoring
      function detectEmotions(message) {
        const detected = [];
        const lower = message.toLowerCase();
        for (const keyword in stressKeywords) {
          if (lower.includes(keyword)) {
            detected.push({ keyword, score: stressKeywords[keyword] });
          }
        }
        // Urutkan berdasarkan skor tertinggi
        detected.sort((a, b) => b.score - a.score);
        return detected;
      }

      // Ambil 1â€“2 emosi yang paling kuat
      function multiEmotionResponse(emotions, rules) {
        if (emotions.length === 0) {
          return getResponse("default", rules);
        }
        const selected = emotions.slice(0, 2).map((e) => getResponse(e.keyword, rules));
        return selected.join(" ");
      }

      // Randomisasi + variasi ringan
      function getResponse(emotion, rules) {
        const responses = rules[emotion] || rules["default"];
        const choice = responses[Math.floor(Math.random() * responses.length)];
        const suffix = [" ðŸ˜Š", " ðŸ¤—", " ðŸ™", "", "", ""];
        return choice + suffix[Math.floor(Math.random() * suffix.length)];
      }

      // Template untuk lebih empati
      function applyTemplate(resp) {
        const templates = [(r) => r, (r) => `${r} Kamu sudah kuat sampai di titik ini.`, (r) => `${r} Aku di sini kalau kamu mau cerita lebih banyak.`, (r) => `${r} Terima kasih sudah percaya cerita ke aku.`];
        return templates[Math.floor(Math.random() * templates.length)](resp);
      }

      // Analisis stres
      function analyzeStressLokal(message) {
        let stressChange = 0;
        const lower = message.toLowerCase();
        for (const keyword in stressKeywords) {
          if (lower.includes(keyword)) {
            stressChange += stressKeywords[keyword];
          }
        }
        return stressChange === 0 ? 1 : stressChange;
      }

      // Balasan utama
      function getResponseLokal(message, stressScore) {
        const emotions = detectEmotions(message);

        if (stressScore >= 75) {
          return {
            type: "escalation",
            message: "Terima kasih sudah berbagi begitu dalam. Aku merasakan beban yang berat dari ceritamu. Terkadang, berbicara dengan seorang profesional bisa sangat membantu. Mungkin ini saat yang tepat untuk mempertimbangkannya?",
          };
        }

        const rawResponse = multiEmotionResponse(emotions, responseRules);
        const finalResponse = applyTemplate(rawResponse);
        return { type: "standard", message: finalResponse };
      }

      // --- DOM Elements & State (tidak berubah) ---
      const landingPage = document.getElementById("landing-page");
      const chatPage = document.getElementById("chat-page");
      const startChatBtn = document.getElementById("start-chat-btn");
      const chatArea = document.getElementById("chat-area");
      const chatInput = document.getElementById("chat-input");
      const sendBtn = document.getElementById("send-btn");
      const stressBar = document.getElementById("stress-bar");
      const stressLevelText = document.getElementById("stress-level-text");

      let currentStressScore = 10;
      const MAX_STRESS_SCORE = 100;

      // --- UI Functions (sama seperti punyamu) ---
      startChatBtn.addEventListener("click", () => {
        landingPage.classList.add("opacity-0", "hidden");
        chatPage.classList.remove("hidden");
        chatPage.classList.add("flex");
        addChatBubble("Selamat datang, mari bercerita tentang apa yang kamu rasakan. Apa yang selama ini terpendam di hatimu?", "ai");
      });

      function addChatBubble(message, sender) {
        const bubble = document.createElement("div");
        bubble.classList.add("chat-bubble", sender === "user" ? "user-bubble" : "ai-bubble");
        bubble.textContent = message;
        chatArea.appendChild(bubble);
        chatArea.scrollTop = chatArea.scrollHeight;
      }

      function updateStressIndicator() {
        const percentage = Math.max(0, Math.min((currentStressScore / MAX_STRESS_SCORE) * 100, 100));
        stressBar.style.width = `${percentage}%`;
        if (currentStressScore < 40) {
          stressLevelText.textContent = "Tingkat Stres: Rendah";
          stressBar.className = "stress-bar-fill bg-green-500";
        } else if (currentStressScore < 75) {
          stressLevelText.textContent = "Tingkat Stres: Sedang";
          stressBar.className = "stress-bar-fill bg-yellow-500";
        } else {
          stressLevelText.textContent = "Tingkat Stres: Tinggi";
          stressBar.className = "stress-bar-fill bg-red-500";
        }
      }

      function showRecommendation() {
        const card = document.createElement("div");
        card.classList.add("p-4", "rounded-lg", "mt-2", "recommendation-card");
        card.innerHTML = `<h3 class="font-bold text-yellow-800">Bantuan Profesional Tersedia</h3><p class="text-sm text-yellow-700 mt-1">Kesehatan mentalmu adalah prioritas. Jangan ragu menghubungi para ahli jika kamu merasa butuh bantuan lebih lanjut.</p>`;
        chatArea.appendChild(card);
        chatArea.scrollTop = chatArea.scrollHeight;
      }

      // --- Main Chat Function (Versi Offline) ---
      function sendMessage() {
        const message = chatInput.value.trim();
        if (message === "") return;

        addChatBubble(message, "user");
        chatInput.value = "";

        const stressChange = analyzeStressLokal(message);
        currentStressScore += stressChange;
        currentStressScore = Math.max(0, Math.min(currentStressScore, MAX_STRESS_SCORE));
        updateStressIndicator();

        setTimeout(() => {
          const response = getResponseLokal(message, currentStressScore);
          addChatBubble(response.message, "ai");
          if (response.type === "escalation") {
            showRecommendation();
          }
        }, 500);
      }

      sendBtn.addEventListener("click", sendMessage);
      chatInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") sendMessage();
      });

      updateStressIndicator();
    </script>
  </body>
</html>
